<div class="modal-overlay" (click)="closeModal()">
  <div class="modal-content" (click)="stopPropagation($event)">
    <!-- Header -->
    <div class="modal-header">
      <h2>Edit Client Profile</h2>
      <button class="close-btn" (click)="closeModal()" [disabled]="saving">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>

    <!-- Body -->
    <div class="modal-body">
      <div class="form-group">
        <label for="firstName">First Name *</label>
        <input
          type="text"
          id="firstName"
          [(ngModel)]="formData.firstName"
          class="form-control"
          placeholder="Enter first name"
          [disabled]="saving"
        />
      </div>

      <div class="form-group">
        <label for="lastName">Last Name *</label>
        <input
          type="text"
          id="lastName"
          [(ngModel)]="formData.lastName"
          class="form-control"
          placeholder="Enter last name"
          [disabled]="saving"
        />
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input
          type="email"
          id="email"
          [(ngModel)]="formData.email"
          class="form-control"
          placeholder="Enter email address"
          [disabled]="saving"
        />
        <div *ngIf="emailChanged" class="warning-notice">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          <span>Changing the email will require the client to use the new email to log in.</span>
        </div>
      </div>

      <div class="form-group">
        <label for="phone">Phone Number</label>
        <input
          type="tel"
          id="phone"
          [(ngModel)]="formData.phone"
          (input)="formatPhoneNumber()"
          class="form-control"
          placeholder="(555) 555-5555"
          [disabled]="saving"
        />
      </div>

      <!-- Error message -->
      <div *ngIf="error" class="error-banner">
        {{ error }}
      </div>
    </div>

    <!-- Footer -->
    <div class="modal-footer">
      <button
        class="btn btn-secondary"
        (click)="closeModal()"
        [disabled]="saving"
      >
        Cancel
      </button>
      <button
        class="btn btn-primary"
        (click)="updateClient()"
        [disabled]="saving"
      >
        {{ saving ? 'Saving...' : 'Save Changes' }}
      </button>
    </div>
  </div>
</div>
