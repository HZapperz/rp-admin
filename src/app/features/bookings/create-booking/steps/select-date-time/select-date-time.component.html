<div class="select-date-time-step">
  <!-- No Groomer Selected -->
  <div *ngIf="!selectedGroomer" class="info-state">
    <mat-icon class="info-icon">person</mat-icon>
    <p>Please select a groomer first</p>
    <small>You must select a groomer before choosing a date and time</small>
  </div>

  <!-- Date Time Selection -->
  <div *ngIf="selectedGroomer" class="datetime-content">
    <div class="content-header">
      <h3>Select Date & Time</h3>
      <div class="groomer-info">
        <mat-icon class="groomer-icon" inline>person</mat-icon>
        <span>Booking for: {{ selectedGroomer.first_name }} {{ selectedGroomer.last_name }}</span>
      </div>
    </div>

    <div class="datetime-grid">
      <!-- Calendar Section -->
      <div class="calendar-section">
        <h4>Choose a Date</h4>

        <div class="calendar">
          <!-- Calendar Header -->
          <div class="calendar-header">
            <button class="nav-btn" (click)="previousMonth()">‹</button>
            <span class="month-year">{{ getCurrentMonthYear() }}</span>
            <button class="nav-btn" (click)="nextMonth()">›</button>
          </div>

          <!-- Day Names -->
          <div class="day-names">
            <div *ngFor="let dayName of dayNames" class="day-name">
              {{ dayName }}
            </div>
          </div>

          <!-- Calendar Days -->
          <div class="calendar-days">
            <div
              *ngFor="let date of calendarDays"
              class="calendar-day"
              [class.empty]="!date"
              [class.past]="date && !isDateSelectable(date)"
              [class.today]="isToday(date)"
              [class.selected]="isDateSelected(date)"
              [class.selectable]="date && isDateSelectable(date)"
              (click)="selectDate(date)"
            >
              <span *ngIf="date">{{ date.getDate() }}</span>
            </div>
          </div>
        </div>

        <!-- Selected Date Display -->
        <div class="selected-date-display" *ngIf="selectedDate">
          <mat-icon class="calendar-icon" inline>calendar_today</mat-icon>
          <span class="date-text">{{ formatDateDisplay(selectedDate) }}</span>
        </div>
      </div>

      <!-- Time Input Section -->
      <div class="timeslots-section">
        <h4>Enter Time</h4>

        <div *ngIf="!selectedDate" class="no-date-message">
          <mat-icon class="clock-icon" inline>schedule</mat-icon>
          <p>Please select a date first</p>
        </div>

        <div *ngIf="selectedDate" class="time-inputs">
          <div class="time-input-group">
            <label class="time-label">Start Time</label>
            <input
              type="text"
              class="time-input"
              [(ngModel)]="startTime"
              placeholder="e.g., 9:30 AM"
              (ngModelChange)="onTimeChange()"
            >
          </div>
          <div class="time-input-group">
            <label class="time-label">End Time</label>
            <input
              type="text"
              class="time-input"
              [(ngModel)]="endTime"
              placeholder="e.g., 11:00 AM"
              (ngModelChange)="onTimeChange()"
            >
          </div>
          <div class="time-format-hint">
            <small>Format: HH:MM AM/PM (e.g., 9:30 AM, 1:00 PM)</small>
          </div>
        </div>

        <!-- Selected Time Display -->
        <div class="selected-time-display" *ngIf="isTimeValid()">
          <mat-icon class="clock-icon" inline>schedule</mat-icon>
          <span class="time-text">{{ startTime }} - {{ endTime }}</span>
        </div>
      </div>
    </div>

    <!-- Summary -->
    <div class="datetime-summary" *ngIf="selectedDate && isTimeValid()">
      <mat-icon class="summary-icon">check_circle</mat-icon>
      <div class="summary-text">
        <div class="summary-title">Appointment Scheduled</div>
        <div class="summary-details">
          {{ formatDateDisplay(selectedDate) }} - {{ startTime }} to {{ endTime }}
        </div>
      </div>
    </div>

    <!-- Validation Message -->
    <div class="validation-message" *ngIf="selectedDate && !isTimeValid()">
      <mat-icon class="info-icon" inline>info</mat-icon>
      <span>Please enter valid start and end times to continue</span>
    </div>
  </div>
</div>
